extends ../layout

block content
  .row
    .col-md-4.col-sm-4.col-xs-12
      +x_panel("Fridge Supplies", "supplies/fridge")
        each supply in fridgeSupplies
          +supply_widget(supply)

    .col-md-4.col-sm-4.col-xs-12
      +x_panel("Freezer Supplies", "supplies/freezer")
        each supply in freezerSupplies
          +supply_widget(supply)

    .col-md-4.col-sm-4.col-xs-12
      +x_panel("Cupboard Supplies", "supplies/cupboard")
        each supply in cupboardSupplies
          +supply_widget(supply)
  .row
    .col-md-12.col-sm-12.col-xs-12
      .x_panel
        .x_title
          h2 Detailed List
          ul.nav.navbar-right.panel_toolbox
            li: a.collapse-link: i.fa.fa-chevron-up
            li.dropdown
              a.dropdown-toggle(href='#', data-toggle='dropdown', role='button', aria-expanded='false')
              ul.dropdown-menu(role='menu')
                li: a(href='#') Settings 1
                li: a(href='#') Settings 2
            li: a.close-link: i.fa.fa-close
          .clearfix
        .x_content
          table.table.table-hover
            thead
              tr
                th Item
                th Location
                th Current Quantity
                th Desired Quantity
                th Automatic Purchase
                th Actions
            tbody
              each supply in supplies
                tr
                  th(scope="row")= supply.name
                  td= supply.location.charAt(0).toUpperCase() + supply.location.slice(1)
                  td= supply.value + " " + supply.units
                  td= supply.desired + " " + supply.units
                  case supply.autoPurchase
                    when true
                      td: span.label.label-success.center Yes
                    when false
                      td: span.label.label-danger.center No
                  td: a(href="/supplies/"+supply.name+"/buy") Purchase

  if errorMessage !== undefined
    script.
      window.onload = function() {
        new PNotify({
          title: 'Something went wrong',
          text: "#{errorMessage}",
          type: 'error',
          styling: 'bootstrap3'
        });
      };